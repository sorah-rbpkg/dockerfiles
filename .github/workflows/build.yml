{
   "jobs": {
      "build-2x7-bionic-amd64": {
         "name": "build-2x7-bionic-amd64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "amd64",
                  "DIST_FILTER": "bionic",
                  "SERIES_FILTER": "2.7"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-2x7-bionic-amd64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-2x7-bionic-arm64": {
         "name": "build-2x7-bionic-arm64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "arm64",
                  "DIST_FILTER": "bionic",
                  "SERIES_FILTER": "2.7"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-2x7-bionic-arm64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-2x7-buster-amd64": {
         "name": "build-2x7-buster-amd64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "amd64",
                  "DIST_FILTER": "buster",
                  "SERIES_FILTER": "2.7"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-2x7-buster-amd64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-2x7-buster-arm64": {
         "name": "build-2x7-buster-arm64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "arm64",
                  "DIST_FILTER": "buster",
                  "SERIES_FILTER": "2.7"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-2x7-buster-arm64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-2x7-focal-amd64": {
         "name": "build-2x7-focal-amd64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "amd64",
                  "DIST_FILTER": "focal",
                  "SERIES_FILTER": "2.7"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-2x7-focal-amd64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-2x7-focal-arm64": {
         "name": "build-2x7-focal-arm64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "arm64",
                  "DIST_FILTER": "focal",
                  "SERIES_FILTER": "2.7"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-2x7-focal-arm64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x0-bionic-amd64": {
         "name": "build-3x0-bionic-amd64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "amd64",
                  "DIST_FILTER": "bionic",
                  "SERIES_FILTER": "3.0"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x0-bionic-amd64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x0-bionic-arm64": {
         "name": "build-3x0-bionic-arm64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "arm64",
                  "DIST_FILTER": "bionic",
                  "SERIES_FILTER": "3.0"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x0-bionic-arm64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x0-bullseye-amd64": {
         "name": "build-3x0-bullseye-amd64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "amd64",
                  "DIST_FILTER": "bullseye",
                  "SERIES_FILTER": "3.0"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x0-bullseye-amd64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x0-bullseye-arm64": {
         "name": "build-3x0-bullseye-arm64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "arm64",
                  "DIST_FILTER": "bullseye",
                  "SERIES_FILTER": "3.0"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x0-bullseye-arm64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x0-buster-amd64": {
         "name": "build-3x0-buster-amd64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "amd64",
                  "DIST_FILTER": "buster",
                  "SERIES_FILTER": "3.0"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x0-buster-amd64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x0-buster-arm64": {
         "name": "build-3x0-buster-arm64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "arm64",
                  "DIST_FILTER": "buster",
                  "SERIES_FILTER": "3.0"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x0-buster-arm64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x0-focal-amd64": {
         "name": "build-3x0-focal-amd64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "amd64",
                  "DIST_FILTER": "focal",
                  "SERIES_FILTER": "3.0"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x0-focal-amd64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x0-focal-arm64": {
         "name": "build-3x0-focal-arm64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "arm64",
                  "DIST_FILTER": "focal",
                  "SERIES_FILTER": "3.0"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x0-focal-arm64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x0-jammy-amd64": {
         "name": "build-3x0-jammy-amd64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "amd64",
                  "DIST_FILTER": "jammy",
                  "SERIES_FILTER": "3.0"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x0-jammy-amd64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x0-jammy-arm64": {
         "name": "build-3x0-jammy-arm64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "arm64",
                  "DIST_FILTER": "jammy",
                  "SERIES_FILTER": "3.0"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x0-jammy-arm64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x1-bionic-amd64": {
         "name": "build-3x1-bionic-amd64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "amd64",
                  "DIST_FILTER": "bionic",
                  "SERIES_FILTER": "3.1"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x1-bionic-amd64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x1-bionic-arm64": {
         "name": "build-3x1-bionic-arm64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "arm64",
                  "DIST_FILTER": "bionic",
                  "SERIES_FILTER": "3.1"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x1-bionic-arm64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x1-bullseye-amd64": {
         "name": "build-3x1-bullseye-amd64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "amd64",
                  "DIST_FILTER": "bullseye",
                  "SERIES_FILTER": "3.1"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x1-bullseye-amd64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x1-bullseye-arm64": {
         "name": "build-3x1-bullseye-arm64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "arm64",
                  "DIST_FILTER": "bullseye",
                  "SERIES_FILTER": "3.1"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x1-bullseye-arm64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x1-focal-amd64": {
         "name": "build-3x1-focal-amd64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "amd64",
                  "DIST_FILTER": "focal",
                  "SERIES_FILTER": "3.1"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x1-focal-amd64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x1-focal-arm64": {
         "name": "build-3x1-focal-arm64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "arm64",
                  "DIST_FILTER": "focal",
                  "SERIES_FILTER": "3.1"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x1-focal-arm64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x1-jammy-amd64": {
         "name": "build-3x1-jammy-amd64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "amd64",
                  "DIST_FILTER": "jammy",
                  "SERIES_FILTER": "3.1"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x1-jammy-amd64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x1-jammy-arm64": {
         "name": "build-3x1-jammy-arm64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "arm64",
                  "DIST_FILTER": "jammy",
                  "SERIES_FILTER": "3.1"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x1-jammy-arm64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x2-bookworm-amd64": {
         "name": "build-3x2-bookworm-amd64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "amd64",
                  "DIST_FILTER": "bookworm",
                  "SERIES_FILTER": "3.2"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x2-bookworm-amd64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x2-bookworm-arm64": {
         "name": "build-3x2-bookworm-arm64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "arm64",
                  "DIST_FILTER": "bookworm",
                  "SERIES_FILTER": "3.2"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x2-bookworm-arm64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x2-bullseye-amd64": {
         "name": "build-3x2-bullseye-amd64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "amd64",
                  "DIST_FILTER": "bullseye",
                  "SERIES_FILTER": "3.2"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x2-bullseye-amd64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x2-bullseye-arm64": {
         "name": "build-3x2-bullseye-arm64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "arm64",
                  "DIST_FILTER": "bullseye",
                  "SERIES_FILTER": "3.2"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x2-bullseye-arm64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x2-focal-amd64": {
         "name": "build-3x2-focal-amd64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "amd64",
                  "DIST_FILTER": "focal",
                  "SERIES_FILTER": "3.2"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x2-focal-amd64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x2-focal-arm64": {
         "name": "build-3x2-focal-arm64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "arm64",
                  "DIST_FILTER": "focal",
                  "SERIES_FILTER": "3.2"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x2-focal-arm64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x2-jammy-amd64": {
         "name": "build-3x2-jammy-amd64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "amd64",
                  "DIST_FILTER": "jammy",
                  "SERIES_FILTER": "3.2"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x2-jammy-amd64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x2-jammy-arm64": {
         "name": "build-3x2-jammy-arm64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "arm64",
                  "DIST_FILTER": "jammy",
                  "SERIES_FILTER": "3.2"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x2-jammy-arm64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x2-noble-amd64": {
         "name": "build-3x2-noble-amd64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "amd64",
                  "DIST_FILTER": "noble",
                  "SERIES_FILTER": "3.2"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x2-noble-amd64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x2-noble-arm64": {
         "name": "build-3x2-noble-arm64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "arm64",
                  "DIST_FILTER": "noble",
                  "SERIES_FILTER": "3.2"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x2-noble-arm64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x3-bookworm-amd64": {
         "name": "build-3x3-bookworm-amd64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "amd64",
                  "DIST_FILTER": "bookworm",
                  "SERIES_FILTER": "3.3"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x3-bookworm-amd64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x3-bookworm-arm64": {
         "name": "build-3x3-bookworm-arm64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "arm64",
                  "DIST_FILTER": "bookworm",
                  "SERIES_FILTER": "3.3"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x3-bookworm-arm64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x3-bullseye-amd64": {
         "name": "build-3x3-bullseye-amd64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "amd64",
                  "DIST_FILTER": "bullseye",
                  "SERIES_FILTER": "3.3"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x3-bullseye-amd64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x3-bullseye-arm64": {
         "name": "build-3x3-bullseye-arm64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "arm64",
                  "DIST_FILTER": "bullseye",
                  "SERIES_FILTER": "3.3"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x3-bullseye-arm64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x3-focal-amd64": {
         "name": "build-3x3-focal-amd64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "amd64",
                  "DIST_FILTER": "focal",
                  "SERIES_FILTER": "3.3"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x3-focal-amd64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x3-focal-arm64": {
         "name": "build-3x3-focal-arm64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "arm64",
                  "DIST_FILTER": "focal",
                  "SERIES_FILTER": "3.3"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x3-focal-arm64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x3-jammy-amd64": {
         "name": "build-3x3-jammy-amd64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "amd64",
                  "DIST_FILTER": "jammy",
                  "SERIES_FILTER": "3.3"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x3-jammy-amd64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x3-jammy-arm64": {
         "name": "build-3x3-jammy-arm64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "arm64",
                  "DIST_FILTER": "jammy",
                  "SERIES_FILTER": "3.3"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x3-jammy-arm64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x3-noble-amd64": {
         "name": "build-3x3-noble-amd64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "amd64",
                  "DIST_FILTER": "noble",
                  "SERIES_FILTER": "3.3"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x3-noble-amd64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "build-3x3-noble-arm64": {
         "name": "build-3x3-noble-arm64",
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "docker/setup-qemu-action@v2"
            },
            {
               "env": {
                  "ARCH_FILTER": "arm64",
                  "DIST_FILTER": "noble",
                  "SERIES_FILTER": "3.3"
               },
               "run": "ruby build.rb --pull --push"
            },
            {
               "uses": "actions/upload-artifact@v3",
               "with": {
                  "name": "build-3x3-noble-arm64-artifacts",
                  "path": "tmp/built_images.json",
                  "retention-days": 1
               }
            }
         ]
      },
      "manifest-2x7-bionic": {
         "name": "manifest-2x7-bionic",
         "needs": [
            "build-2x7-bionic-amd64",
            "build-2x7-bionic-arm64"
         ],
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-2x7-bionic-amd64-artifacts",
                  "path": "tmp/build-2x7-bionic-amd64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-2x7-bionic-arm64-artifacts",
                  "path": "tmp/build-2x7-bionic-arm64-artifacts"
               }
            },
            {
               "run": "find tmp"
            },
            {
               "run": "ruby -rjson -e \"puts JSON.generate(ARGV.map { JSON.parse(File.read(_1)) }.inject(&:+))\" tmp/*-artifacts/built_images.json > tmp/built_images.json"
            },
            {
               "env": {
                  "DIST_FILTER": "bionic",
                  "SERIES_FILTER": "2.7"
               },
               "run": "ruby manifest.rb --pull --subtag"
            }
         ]
      },
      "manifest-2x7-buster": {
         "name": "manifest-2x7-buster",
         "needs": [
            "build-2x7-buster-amd64",
            "build-2x7-buster-arm64"
         ],
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-2x7-buster-amd64-artifacts",
                  "path": "tmp/build-2x7-buster-amd64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-2x7-buster-arm64-artifacts",
                  "path": "tmp/build-2x7-buster-arm64-artifacts"
               }
            },
            {
               "run": "find tmp"
            },
            {
               "run": "ruby -rjson -e \"puts JSON.generate(ARGV.map { JSON.parse(File.read(_1)) }.inject(&:+))\" tmp/*-artifacts/built_images.json > tmp/built_images.json"
            },
            {
               "env": {
                  "DIST_FILTER": "buster",
                  "SERIES_FILTER": "2.7"
               },
               "run": "ruby manifest.rb --pull --subtag"
            }
         ]
      },
      "manifest-2x7-focal": {
         "name": "manifest-2x7-focal",
         "needs": [
            "build-2x7-focal-amd64",
            "build-2x7-focal-arm64"
         ],
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-2x7-focal-amd64-artifacts",
                  "path": "tmp/build-2x7-focal-amd64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-2x7-focal-arm64-artifacts",
                  "path": "tmp/build-2x7-focal-arm64-artifacts"
               }
            },
            {
               "run": "find tmp"
            },
            {
               "run": "ruby -rjson -e \"puts JSON.generate(ARGV.map { JSON.parse(File.read(_1)) }.inject(&:+))\" tmp/*-artifacts/built_images.json > tmp/built_images.json"
            },
            {
               "env": {
                  "DIST_FILTER": "focal",
                  "SERIES_FILTER": "2.7"
               },
               "run": "ruby manifest.rb --pull --subtag"
            }
         ]
      },
      "manifest-3x0-bionic": {
         "name": "manifest-3x0-bionic",
         "needs": [
            "build-3x0-bionic-amd64",
            "build-3x0-bionic-arm64"
         ],
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x0-bionic-amd64-artifacts",
                  "path": "tmp/build-3x0-bionic-amd64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x0-bionic-arm64-artifacts",
                  "path": "tmp/build-3x0-bionic-arm64-artifacts"
               }
            },
            {
               "run": "find tmp"
            },
            {
               "run": "ruby -rjson -e \"puts JSON.generate(ARGV.map { JSON.parse(File.read(_1)) }.inject(&:+))\" tmp/*-artifacts/built_images.json > tmp/built_images.json"
            },
            {
               "env": {
                  "DIST_FILTER": "bionic",
                  "SERIES_FILTER": "3.0"
               },
               "run": "ruby manifest.rb --pull --subtag"
            }
         ]
      },
      "manifest-3x0-bullseye": {
         "name": "manifest-3x0-bullseye",
         "needs": [
            "build-3x0-bullseye-amd64",
            "build-3x0-bullseye-arm64"
         ],
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x0-bullseye-amd64-artifacts",
                  "path": "tmp/build-3x0-bullseye-amd64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x0-bullseye-arm64-artifacts",
                  "path": "tmp/build-3x0-bullseye-arm64-artifacts"
               }
            },
            {
               "run": "find tmp"
            },
            {
               "run": "ruby -rjson -e \"puts JSON.generate(ARGV.map { JSON.parse(File.read(_1)) }.inject(&:+))\" tmp/*-artifacts/built_images.json > tmp/built_images.json"
            },
            {
               "env": {
                  "DIST_FILTER": "bullseye",
                  "SERIES_FILTER": "3.0"
               },
               "run": "ruby manifest.rb --pull --subtag"
            }
         ]
      },
      "manifest-3x0-buster": {
         "name": "manifest-3x0-buster",
         "needs": [
            "build-3x0-buster-amd64",
            "build-3x0-buster-arm64"
         ],
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x0-buster-amd64-artifacts",
                  "path": "tmp/build-3x0-buster-amd64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x0-buster-arm64-artifacts",
                  "path": "tmp/build-3x0-buster-arm64-artifacts"
               }
            },
            {
               "run": "find tmp"
            },
            {
               "run": "ruby -rjson -e \"puts JSON.generate(ARGV.map { JSON.parse(File.read(_1)) }.inject(&:+))\" tmp/*-artifacts/built_images.json > tmp/built_images.json"
            },
            {
               "env": {
                  "DIST_FILTER": "buster",
                  "SERIES_FILTER": "3.0"
               },
               "run": "ruby manifest.rb --pull --subtag"
            }
         ]
      },
      "manifest-3x0-focal": {
         "name": "manifest-3x0-focal",
         "needs": [
            "build-3x0-focal-amd64",
            "build-3x0-focal-arm64"
         ],
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x0-focal-amd64-artifacts",
                  "path": "tmp/build-3x0-focal-amd64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x0-focal-arm64-artifacts",
                  "path": "tmp/build-3x0-focal-arm64-artifacts"
               }
            },
            {
               "run": "find tmp"
            },
            {
               "run": "ruby -rjson -e \"puts JSON.generate(ARGV.map { JSON.parse(File.read(_1)) }.inject(&:+))\" tmp/*-artifacts/built_images.json > tmp/built_images.json"
            },
            {
               "env": {
                  "DIST_FILTER": "focal",
                  "SERIES_FILTER": "3.0"
               },
               "run": "ruby manifest.rb --pull --subtag"
            }
         ]
      },
      "manifest-3x0-jammy": {
         "name": "manifest-3x0-jammy",
         "needs": [
            "build-3x0-jammy-amd64",
            "build-3x0-jammy-arm64"
         ],
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x0-jammy-amd64-artifacts",
                  "path": "tmp/build-3x0-jammy-amd64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x0-jammy-arm64-artifacts",
                  "path": "tmp/build-3x0-jammy-arm64-artifacts"
               }
            },
            {
               "run": "find tmp"
            },
            {
               "run": "ruby -rjson -e \"puts JSON.generate(ARGV.map { JSON.parse(File.read(_1)) }.inject(&:+))\" tmp/*-artifacts/built_images.json > tmp/built_images.json"
            },
            {
               "env": {
                  "DIST_FILTER": "jammy",
                  "SERIES_FILTER": "3.0"
               },
               "run": "ruby manifest.rb --pull --subtag"
            }
         ]
      },
      "manifest-3x1-bionic": {
         "name": "manifest-3x1-bionic",
         "needs": [
            "build-3x1-bionic-amd64",
            "build-3x1-bionic-arm64"
         ],
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x1-bionic-amd64-artifacts",
                  "path": "tmp/build-3x1-bionic-amd64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x1-bionic-arm64-artifacts",
                  "path": "tmp/build-3x1-bionic-arm64-artifacts"
               }
            },
            {
               "run": "find tmp"
            },
            {
               "run": "ruby -rjson -e \"puts JSON.generate(ARGV.map { JSON.parse(File.read(_1)) }.inject(&:+))\" tmp/*-artifacts/built_images.json > tmp/built_images.json"
            },
            {
               "env": {
                  "DIST_FILTER": "bionic",
                  "SERIES_FILTER": "3.1"
               },
               "run": "ruby manifest.rb --pull --subtag"
            }
         ]
      },
      "manifest-3x1-bullseye": {
         "name": "manifest-3x1-bullseye",
         "needs": [
            "build-3x1-bullseye-amd64",
            "build-3x1-bullseye-arm64"
         ],
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x1-bullseye-amd64-artifacts",
                  "path": "tmp/build-3x1-bullseye-amd64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x1-bullseye-arm64-artifacts",
                  "path": "tmp/build-3x1-bullseye-arm64-artifacts"
               }
            },
            {
               "run": "find tmp"
            },
            {
               "run": "ruby -rjson -e \"puts JSON.generate(ARGV.map { JSON.parse(File.read(_1)) }.inject(&:+))\" tmp/*-artifacts/built_images.json > tmp/built_images.json"
            },
            {
               "env": {
                  "DIST_FILTER": "bullseye",
                  "SERIES_FILTER": "3.1"
               },
               "run": "ruby manifest.rb --pull --subtag"
            }
         ]
      },
      "manifest-3x1-focal": {
         "name": "manifest-3x1-focal",
         "needs": [
            "build-3x1-focal-amd64",
            "build-3x1-focal-arm64"
         ],
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x1-focal-amd64-artifacts",
                  "path": "tmp/build-3x1-focal-amd64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x1-focal-arm64-artifacts",
                  "path": "tmp/build-3x1-focal-arm64-artifacts"
               }
            },
            {
               "run": "find tmp"
            },
            {
               "run": "ruby -rjson -e \"puts JSON.generate(ARGV.map { JSON.parse(File.read(_1)) }.inject(&:+))\" tmp/*-artifacts/built_images.json > tmp/built_images.json"
            },
            {
               "env": {
                  "DIST_FILTER": "focal",
                  "SERIES_FILTER": "3.1"
               },
               "run": "ruby manifest.rb --pull --subtag"
            }
         ]
      },
      "manifest-3x1-jammy": {
         "name": "manifest-3x1-jammy",
         "needs": [
            "build-3x1-jammy-amd64",
            "build-3x1-jammy-arm64"
         ],
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x1-jammy-amd64-artifacts",
                  "path": "tmp/build-3x1-jammy-amd64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x1-jammy-arm64-artifacts",
                  "path": "tmp/build-3x1-jammy-arm64-artifacts"
               }
            },
            {
               "run": "find tmp"
            },
            {
               "run": "ruby -rjson -e \"puts JSON.generate(ARGV.map { JSON.parse(File.read(_1)) }.inject(&:+))\" tmp/*-artifacts/built_images.json > tmp/built_images.json"
            },
            {
               "env": {
                  "DIST_FILTER": "jammy",
                  "SERIES_FILTER": "3.1"
               },
               "run": "ruby manifest.rb --pull --subtag"
            }
         ]
      },
      "manifest-3x2-bookworm": {
         "name": "manifest-3x2-bookworm",
         "needs": [
            "build-3x2-bookworm-amd64",
            "build-3x2-bookworm-arm64"
         ],
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x2-bookworm-amd64-artifacts",
                  "path": "tmp/build-3x2-bookworm-amd64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x2-bookworm-arm64-artifacts",
                  "path": "tmp/build-3x2-bookworm-arm64-artifacts"
               }
            },
            {
               "run": "find tmp"
            },
            {
               "run": "ruby -rjson -e \"puts JSON.generate(ARGV.map { JSON.parse(File.read(_1)) }.inject(&:+))\" tmp/*-artifacts/built_images.json > tmp/built_images.json"
            },
            {
               "env": {
                  "DIST_FILTER": "bookworm",
                  "SERIES_FILTER": "3.2"
               },
               "run": "ruby manifest.rb --pull --subtag"
            }
         ]
      },
      "manifest-3x2-bullseye": {
         "name": "manifest-3x2-bullseye",
         "needs": [
            "build-3x2-bullseye-amd64",
            "build-3x2-bullseye-arm64"
         ],
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x2-bullseye-amd64-artifacts",
                  "path": "tmp/build-3x2-bullseye-amd64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x2-bullseye-arm64-artifacts",
                  "path": "tmp/build-3x2-bullseye-arm64-artifacts"
               }
            },
            {
               "run": "find tmp"
            },
            {
               "run": "ruby -rjson -e \"puts JSON.generate(ARGV.map { JSON.parse(File.read(_1)) }.inject(&:+))\" tmp/*-artifacts/built_images.json > tmp/built_images.json"
            },
            {
               "env": {
                  "DIST_FILTER": "bullseye",
                  "SERIES_FILTER": "3.2"
               },
               "run": "ruby manifest.rb --pull --subtag"
            }
         ]
      },
      "manifest-3x2-focal": {
         "name": "manifest-3x2-focal",
         "needs": [
            "build-3x2-focal-amd64",
            "build-3x2-focal-arm64"
         ],
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x2-focal-amd64-artifacts",
                  "path": "tmp/build-3x2-focal-amd64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x2-focal-arm64-artifacts",
                  "path": "tmp/build-3x2-focal-arm64-artifacts"
               }
            },
            {
               "run": "find tmp"
            },
            {
               "run": "ruby -rjson -e \"puts JSON.generate(ARGV.map { JSON.parse(File.read(_1)) }.inject(&:+))\" tmp/*-artifacts/built_images.json > tmp/built_images.json"
            },
            {
               "env": {
                  "DIST_FILTER": "focal",
                  "SERIES_FILTER": "3.2"
               },
               "run": "ruby manifest.rb --pull --subtag"
            }
         ]
      },
      "manifest-3x2-jammy": {
         "name": "manifest-3x2-jammy",
         "needs": [
            "build-3x2-jammy-amd64",
            "build-3x2-jammy-arm64"
         ],
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x2-jammy-amd64-artifacts",
                  "path": "tmp/build-3x2-jammy-amd64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x2-jammy-arm64-artifacts",
                  "path": "tmp/build-3x2-jammy-arm64-artifacts"
               }
            },
            {
               "run": "find tmp"
            },
            {
               "run": "ruby -rjson -e \"puts JSON.generate(ARGV.map { JSON.parse(File.read(_1)) }.inject(&:+))\" tmp/*-artifacts/built_images.json > tmp/built_images.json"
            },
            {
               "env": {
                  "DIST_FILTER": "jammy",
                  "SERIES_FILTER": "3.2"
               },
               "run": "ruby manifest.rb --pull --subtag"
            }
         ]
      },
      "manifest-3x2-noble": {
         "name": "manifest-3x2-noble",
         "needs": [
            "build-3x2-noble-amd64",
            "build-3x2-noble-arm64"
         ],
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x2-noble-amd64-artifacts",
                  "path": "tmp/build-3x2-noble-amd64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x2-noble-arm64-artifacts",
                  "path": "tmp/build-3x2-noble-arm64-artifacts"
               }
            },
            {
               "run": "find tmp"
            },
            {
               "run": "ruby -rjson -e \"puts JSON.generate(ARGV.map { JSON.parse(File.read(_1)) }.inject(&:+))\" tmp/*-artifacts/built_images.json > tmp/built_images.json"
            },
            {
               "env": {
                  "DIST_FILTER": "noble",
                  "SERIES_FILTER": "3.2"
               },
               "run": "ruby manifest.rb --pull --subtag"
            }
         ]
      },
      "manifest-3x3-bookworm": {
         "name": "manifest-3x3-bookworm",
         "needs": [
            "build-3x3-bookworm-amd64",
            "build-3x3-bookworm-arm64"
         ],
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x3-bookworm-amd64-artifacts",
                  "path": "tmp/build-3x3-bookworm-amd64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x3-bookworm-arm64-artifacts",
                  "path": "tmp/build-3x3-bookworm-arm64-artifacts"
               }
            },
            {
               "run": "find tmp"
            },
            {
               "run": "ruby -rjson -e \"puts JSON.generate(ARGV.map { JSON.parse(File.read(_1)) }.inject(&:+))\" tmp/*-artifacts/built_images.json > tmp/built_images.json"
            },
            {
               "env": {
                  "DIST_FILTER": "bookworm",
                  "SERIES_FILTER": "3.3"
               },
               "run": "ruby manifest.rb --pull --subtag"
            }
         ]
      },
      "manifest-3x3-bullseye": {
         "name": "manifest-3x3-bullseye",
         "needs": [
            "build-3x3-bullseye-amd64",
            "build-3x3-bullseye-arm64"
         ],
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x3-bullseye-amd64-artifacts",
                  "path": "tmp/build-3x3-bullseye-amd64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x3-bullseye-arm64-artifacts",
                  "path": "tmp/build-3x3-bullseye-arm64-artifacts"
               }
            },
            {
               "run": "find tmp"
            },
            {
               "run": "ruby -rjson -e \"puts JSON.generate(ARGV.map { JSON.parse(File.read(_1)) }.inject(&:+))\" tmp/*-artifacts/built_images.json > tmp/built_images.json"
            },
            {
               "env": {
                  "DIST_FILTER": "bullseye",
                  "SERIES_FILTER": "3.3"
               },
               "run": "ruby manifest.rb --pull --subtag"
            }
         ]
      },
      "manifest-3x3-focal": {
         "name": "manifest-3x3-focal",
         "needs": [
            "build-3x3-focal-amd64",
            "build-3x3-focal-arm64"
         ],
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x3-focal-amd64-artifacts",
                  "path": "tmp/build-3x3-focal-amd64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x3-focal-arm64-artifacts",
                  "path": "tmp/build-3x3-focal-arm64-artifacts"
               }
            },
            {
               "run": "find tmp"
            },
            {
               "run": "ruby -rjson -e \"puts JSON.generate(ARGV.map { JSON.parse(File.read(_1)) }.inject(&:+))\" tmp/*-artifacts/built_images.json > tmp/built_images.json"
            },
            {
               "env": {
                  "DIST_FILTER": "focal",
                  "SERIES_FILTER": "3.3"
               },
               "run": "ruby manifest.rb --pull --subtag"
            }
         ]
      },
      "manifest-3x3-jammy": {
         "name": "manifest-3x3-jammy",
         "needs": [
            "build-3x3-jammy-amd64",
            "build-3x3-jammy-arm64"
         ],
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x3-jammy-amd64-artifacts",
                  "path": "tmp/build-3x3-jammy-amd64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x3-jammy-arm64-artifacts",
                  "path": "tmp/build-3x3-jammy-arm64-artifacts"
               }
            },
            {
               "run": "find tmp"
            },
            {
               "run": "ruby -rjson -e \"puts JSON.generate(ARGV.map { JSON.parse(File.read(_1)) }.inject(&:+))\" tmp/*-artifacts/built_images.json > tmp/built_images.json"
            },
            {
               "env": {
                  "DIST_FILTER": "jammy",
                  "SERIES_FILTER": "3.3"
               },
               "run": "ruby manifest.rb --pull --subtag"
            }
         ]
      },
      "manifest-3x3-noble": {
         "name": "manifest-3x3-noble",
         "needs": [
            "build-3x3-noble-amd64",
            "build-3x3-noble-arm64"
         ],
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x3-noble-amd64-artifacts",
                  "path": "tmp/build-3x3-noble-amd64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x3-noble-arm64-artifacts",
                  "path": "tmp/build-3x3-noble-arm64-artifacts"
               }
            },
            {
               "run": "find tmp"
            },
            {
               "run": "ruby -rjson -e \"puts JSON.generate(ARGV.map { JSON.parse(File.read(_1)) }.inject(&:+))\" tmp/*-artifacts/built_images.json > tmp/built_images.json"
            },
            {
               "env": {
                  "DIST_FILTER": "noble",
                  "SERIES_FILTER": "3.3"
               },
               "run": "ruby manifest.rb --pull --subtag"
            }
         ]
      },
      "manifest-latest": {
         "name": "manifest-latest",
         "needs": [
            "build-3x3-focal-amd64",
            "build-3x3-focal-arm64",
            "build-3x3-jammy-amd64",
            "build-3x3-jammy-arm64",
            "build-3x3-noble-amd64",
            "build-3x3-noble-arm64",
            "build-3x3-bullseye-amd64",
            "build-3x3-bullseye-arm64",
            "build-3x3-bookworm-amd64",
            "build-3x3-bookworm-arm64"
         ],
         "permissions": {
            "contents": "read",
            "id-token": "write"
         },
         "runs-on": "ubuntu-latest",
         "steps": [
            {
               "run": "mkdir -p ~/.docker\\n\necho '{\"experimental\": \"enabled\"}' > ~/.docker/config.json\n"
            },
            {
               "uses": "ruby/setup-ruby@v1",
               "with": {
                  "ruby-version": "3.3"
               }
            },
            {
               "name": "login-dockerhub",
               "run": "echo ${{ secrets.DOCKERHUB_TOKEN }} | docker login -u sorah --password-stdin"
            },
            {
               "uses": "aws-actions/configure-aws-credentials@v1",
               "with": {
                  "aws-region": "us-east-1",
                  "role-duration-seconds": 14400,
                  "role-skip-session-tagging": "true",
                  "role-to-assume": "${{ secrets.AWS_ROLE_TO_ASSUME }}"
               }
            },
            {
               "name": "Login to ECR Public",
               "run": "aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws"
            },
            {
               "uses": "actions/checkout@v3"
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x3-focal-amd64-artifacts",
                  "path": "tmp/build-3x3-focal-amd64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x3-focal-arm64-artifacts",
                  "path": "tmp/build-3x3-focal-arm64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x3-jammy-amd64-artifacts",
                  "path": "tmp/build-3x3-jammy-amd64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x3-jammy-arm64-artifacts",
                  "path": "tmp/build-3x3-jammy-arm64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x3-noble-amd64-artifacts",
                  "path": "tmp/build-3x3-noble-amd64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x3-noble-arm64-artifacts",
                  "path": "tmp/build-3x3-noble-arm64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x3-bullseye-amd64-artifacts",
                  "path": "tmp/build-3x3-bullseye-amd64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x3-bullseye-arm64-artifacts",
                  "path": "tmp/build-3x3-bullseye-arm64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x3-bookworm-amd64-artifacts",
                  "path": "tmp/build-3x3-bookworm-amd64-artifacts"
               }
            },
            {
               "uses": "actions/download-artifact@v3",
               "with": {
                  "name": "build-3x3-bookworm-arm64-artifacts",
                  "path": "tmp/build-3x3-bookworm-arm64-artifacts"
               }
            },
            {
               "run": "find tmp"
            },
            {
               "run": "ruby -rjson -e \"puts JSON.generate(ARGV.map { JSON.parse(File.read(_1)) }.inject(&:+))\" tmp/*-artifacts/built_images.json > tmp/built_images.json"
            },
            {
               "env": { },
               "run": "ruby manifest.rb --pull --latest"
            }
         ]
      }
   },
   "name": "docker-build",
   "on": {
      "push": {
         "branches": [
            "master"
         ]
      },
      "schedule": [
         {
            "cron": "18 7 2,12,22 * *"
         }
      ]
   }
}
